---
submitToken: AE4034734FBF15FA2F24FD47D96D01A19AD6A0B796C76086C5B6277A788A8AAF
title: 哪些情况下索引会失效？
channel: topic
labels: 数据库
---

- 以“%(表示任意0个或多个字符)”开头的LIKE语句；

- OR语句前后没有同时使用索引；

- 数据类型出现隐式转化（如varchar不加单引号的话可能会自动转换为int型）；

- 对于多列索引，必须满足 最左匹配原则/**最左前缀原则** (最左优先，eg：多列索引col1、col2和col3，则 索引生效的情形包括 col1或col1，col2或col1，col2，col3)；

- 如果MySQL估计全表扫描比索引快，则不使用索引（比如非常小的表）

## 在哪些地方适合创建索引？

- 某列经常作为最大最小值；

- 经常被查询的字段；

- 经常用作表连接的字段；

- 经常出现在ORDER BY/GROUP BY/DISDINCT后面的字段

## 创建索引时需要注意什么？

- 只应建立在**小字段**上，而不要对大文本或图片建立索引（一页存储的数据越多一次IO操作获取的数据越大效率越高）；

- 建立索引的字段应该**非空**，在MySQL中，含有空值的列很难进行查询优化，因为它们使得索引、索引的统计信息以及比较运算更加复杂。应该用0、一个特殊的值或者一个空串代替NULL；

- 选择**数据密度大**（唯一值占总数的百分比很大）的字段作索引