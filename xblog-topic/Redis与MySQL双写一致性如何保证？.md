---
submitToken: B9737A0D380712AF914F10BDA108D0480941F3367D5F42510A275037D0C77FB4
title: Redis与MySQL双写一致性如何保证？
channel: topic
labels: redis
---


3种方案保证数据库与缓存的一致性

- 延时双删策略
  删除后在设置定时任务删除

- 删除缓存重试机制
  删除一次可能会失败，要有容错

- 读取biglog异步删除缓存
  这个文字无法理解


```
综上所述，在分布式系统中，缓存和数据库同时存在时，如果有写操作的时候，「先操作数据库，再操作缓存」。如下：

1.读取缓存中是否有相关数据
2.如果缓存中有相关数据value，则返回
3.如果缓存中没有相关数据，则从数据库读取相关数据放入缓存中key->value，再返回
4.如果有更新数据，则先更新数据库，再删除缓存
5.为了保证第四步删除缓存成功，使用binlog异步删除
6.如果是主从数据库，binglog取自于从库
7.如果是一主多从，每个从库都要采集binlog，然后消费端收到最后一台binlog数据才删除缓存，或者为了简单，收到一次更新log，删除一次缓存
```